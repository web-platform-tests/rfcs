# RFC 106: Move wpt.fyi metrics generation into the WPT org

## Summary

Move https://github.com/Ecosystem-Infra/wpt-results and https://github.com/Ecosystem-Infra/wpt-results-analysis into the web-platform-tests GitHub org.

## Details

The following metrics on wpt.fyi are generated by wpt-results-analysis:

- Browser Specific Failures
- Compat 2021
- Interop 2022

wpt-results-analysis depends on wpt-results, a highly compressed form of all full wpt.fyi runs ever, currently ~52k stored in a ~385M Git repository. This makes it possible to load thousands (or all) runs into memory at the same time, speeding up metrics generation.

## Risks

wpt-results-analysis depends on nodegit, which only works on Node.js 14, see https://github.com/nodegit/nodegit/issues/1840.

The wpt.fyi frontend fetches data from https://raw.githubusercontent.com/Ecosystem-Infra/wpt-results-analysis/gh-pages/data/interop-2022/interop-2022-experimental.csv and similar URLs. Those URLs will break when the wpt-results-analysis repo is transferred, and the [HTML redirect method](https://gist.github.com/domenic/1f286d415559b56d725bee51a62c24a7) will not work. To avoid this, the data files should be hosted in a storage bucket instead of on GitHub pages, and wpt.fyi needs to start using that storage bucket before the repository is moved.

## Alternatives

We could merge the metrics generation code into the wpt.fyi repository, but the wpt-results would still need to be standalone.
